<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<record model="ir.ui.view" id="maxwell_crm_lead_view_form">
        <field name="name">crm.lead.form</field>
        <field name="model">crm.lead</field>
        <field name="type">form</field>
        <field name="inherit_id" ref="crm.crm_lead_view_form"></field>
        <field name="arch" type="xml">
			<xpath expr="//button[@name='action_sale_quotations_new']" position="attributes">
				<attribute name="context">{'default_project_id':project_id}</attribute>
			</xpath>
			<xpath expr="//button[@name='action_schedule_meeting']" position='after'>
				<button class="oe_stat_button" type="object" name="action_view_service_order" icon="fa-wrench" width='180px'>
                	<field name="service_order_count" class="o_stat_value" widget="statinfo" string="Service Order(s)"/>
                </button>
				
				<button class="oe_stat_button" type="object" name="action_view_ticket" icon="fa-ticket" width='180px'>
                	<field name="ticket_count" class="o_stat_value" widget="statinfo" string="Ticket(s)"/>
                </button>
			</xpath>
			
			
        	<xpath expr="//div[@name='button_box']" position="after" >
        		<div class="text-center">
	        		<h2>
	                    <strong><field name="number" attrs="{'invisible':[('type', '=', 'lead')],'readonly':True}"/></strong>
	                </h2>
                </div>
        	</xpath>
			<!--<xpath expr="//group[@name='opportunity_partner']/field[@name='partner_id']" position="replace" >
			</xpath>
			<xpath expr="//field[@name='partner_name']" position="replace" >
			</xpath>-->
			<xpath expr="//group[@name='opportunity_partner']/field[@name='partner_id']" position="attributes">
				<attribute name="attrs">{'required':[('type', '=', 'opportunity')]}</attribute>
				<attribute name="string">Client (Billing Customer)</attribute>
			</xpath>
			<xpath expr="//group[@name='opportunity_partner']/field[@name='partner_id']" position="attributes">
				<attribute name="options">{'no_quick_create': True, 'no_create_edit': True, 'no_open': True}</attribute>
			</xpath>
			<xpath expr="//group[@name='opportunity_partner']/field[@name='partner_id']" position="after">
        		<field name="end_cutomer_id" attrs="{'required':True}" options="{'no_quick_create': True, 'no_create_edit': True, 'no_open': True}"/>
				<field name="project_id" attrs="{'required':True}" options="{'no_quick_create': True, 'no_create_edit': True, 'no_open': True}"/>
<!--				<field name="partner_invoice_id" options="{'no_quick_create': True, 'no_create_edit': True, 'no_open': True}"/>
-->				<field name="job_id" attrs="{'required':[('type','!=','lead')]}" options="{'no_quick_create': True, 'no_create_edit': True, 'no_open': True}"/>
				<field name="start_date"/>
				<field name="coverage"/>
			</xpath>
			<!--<xpath expr="//group[1]" position="before">
				<group>
					<field  name="partner_id" widget="res_partner_many2one" context="{'default_name': contact_name,'default_street': street,'default_city': city,'default_state_id': state_id,'default_zip': zip,'default_country_id': country_id,'default_function': function,'default_phone': phone,'default_mobile': mobile,'default_email': email_from,'default_user_id': user_id,'default_team_id': team_id,'default_website': website,'show_vat': True,'default_customer_rank':1}" 
					attrs="{'required':[('type', '=', 'opportunity')]}"/>
					<field name="project_id"/>
					<field name="job_id" attrs="{'required':[('type','!=','lead')]}"/>
					<field name="start_date"/>
					<field name="coverage"/>
				</group>
			</xpath>-->
			<!--<xpath expr="//label[@for='email_from']" position="before">
				<field name="customer_country"/>
				<field name="customer_state"/>
				<field name="customer_city"/>
			</xpath>-->
			<xpath expr="//page[@name='internal_notes']" position='after'>
				<page string='Applications' name='applications'>
					<field name="job_application_ids" readonly="1">
						<tree>
							<field name="partner_name"/>
							<field name="partner_mobile"/>
							<field name="email_from"/>
							<field name="stage_id"/>
							<field name="categ_ids" widget="many2many_tags" options="{'color_field': 'color', 'no_create_edit': True}"/>
							<field name="salary_expected"/>
							<field name="salary_proposed"/>
							<field name="salary_expected"/>
							<button name="create_employee_from_applicant" type="object"
                                string="Create Employee" class="oe_highlight"/>
						</tree>
					</field>
				</page>
			</xpath>
			<xpath expr="//field[@name='partner_id']" position="attributes" >
				<attribute name="context">{'default_customer_rank': 1,'default_type':'contact'}</attribute>
			</xpath>
			<xpath expr="//field[@name='date_deadline']" position="attributes" >
				<attribute name="string">Deadline</attribute>
				<attribute name="attrs">{'required':[('type', '=', 'opportunity')]}</attribute>
			</xpath>
			<xpath expr="//field[@name='date_deadline']" position="before" >
				<field name="assign_date"/>
			</xpath>
			<field name="team_id" position="after">
				<field name="team_lead"/>
				<field name="sd_manager" required="1" options="{'no_quick_create': True, 'no_create_edit': True, 'no_open': True}"/>
        	</field>
        </field>
	</record>
</odoo>